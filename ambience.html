<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>RPG Ambience</title>
		
		<link rel="stylesheet" href="ambience.css">
		<link rel="icon" type="image/png" href="images/icon.png">
		
		<script>
			window.URL = window.URL || window.webkitURL;
			window.indexedDB = window.indexedDB || window.webkitIndexedDB;
		</script>
		
		<script src="source/extensions.js"></script>
		<script src="libraries/angular.js"></script>
		<script src="libraries/angular-ui.js"></script>
		
		<script src="libraries/key.js"></script>
		<script src="libraries/object-url-from-data-url.js"></script>
		
		<script src="libraries/ambience-stage/libraries/manymation/source/manymation.js"></script>
		<script src="libraries/ambience-stage/source/Stage.js"></script>
		<script src="libraries/ambience-stage/source/MediaPlayers/Background.js"></script>
		<script src="libraries/ambience-stage/source/MediaPlayers/Image.js"></script>
		<script src="libraries/ambience-stage/source/MediaPlayers/Sound.js"></script>
		<script src="libraries/ambience-stage/source/MediaPlayers/Text.js"></script>
		<script src="libraries/ambience-stage/source/Scene.js"></script>
		
		<script src="source/App.js"></script>
		<script src="source/Controller.js"></script>
		<script src="source/Adventure.js"></script>
		<script src="source/Adventure.upgrade.js"></script>
		<script src="source/Scene.js"></script>
		<script src="source/Scene.Background.js"></script>
		<script src="source/Scene.Image.js"></script>
		<script src="source/Scene.Text.js"></script>
		<script src="source/Scene.Sound.js"></script>
		<script src="source/AdventureLibrary.js"></script>
		<script src="source/MediaLibrary.js"></script>

		<script src="source/Adventure.Controller.js"></script>
		<script src="source/Scene.Controller.js"></script>
		
		<script src="source/TextButton.js"></script>
		<script src="source/ScenePreview.js"></script>
		<script src="source/ToggleButton.js"></script>
		<script src="source/Split.js"></script>
		<script src="source/NoPointer.js"></script>
		<script src="source/KeyInput.js"></script>
		
		<script src="source/bootstrap.js"></script>
	</head>
	<body data-ng-controller="Ambience.App">
		<div id="theater" class="theater">
			<div id="background" class="layer"></div>
			<div id="foreground" class="layer"></div>
		</div>
		<div id="interface" class="interface" data-split="0.75" data-split-collapse-left="!editorIsVisible">
			<div
				id="editor"
				class="editor"
				data-ng-show="editorIsVisible">
				<div class="menu-bar">
					<ul class="action-list adventure">
						<li class="action">
							<select
								data-ng-model="adventure"
								data-ng-options="a.dropdownTitle for a in adventures"></select>
						</li>
						<li class="action new">
							<button
								type="button"
								data-ng-click="createAdventure()">New Adventure</button>
						</li>
						<li class="action rename">
							<text-button
								data-ng-model="adventure.title"
								data-ng-label="Rename Adventure"></text-button>
						</li>
						<li class="action delete">
							<button
								type="button"
								data-ng-click="toggleSelectedRemoval()">{{adventure.removalButtonText}}</button>
						</li>
					</ul>
					<ul class="action-list playback">
						<li class="action play">
							<button
								type="button"
								data-ng-click="playSelected()">Play</button>
						</li>
						<li class="action stop">
							<button
								type="button"
								data-ng-click="stopCurrent()">Stop</button>
						</li>
					</ul>
				</div>
				<div class="view-list" id="view-list">
					<ul class="tab-list">
						<li class="tab">
							<a href="#scene-tab">Scenes</a>
						</li>
					</ul>
					<div
						id="scene-tab"
						class="scene-view tab-content"
						data-ng-controller="Ambience.App.Adventure.Controller">
						<div class="list-view">
							<ul>
								<li
									class="list-item"
									data-ng-repeat="scene in adventure.scenes"
									data-ng-controller="Ambience.App.Scene.Controller"
									data-ng-class="{ selected: isSelected }">
									<a
										href="#"
										data-ng-click="selectScene(scene)">
										<scene-preview data-ng-scene="scene"></scene-preview>
										<span data-ui-if="scene.name">{{scene.name}}</span>
										<span data-ui-if="scene.key" class="key">{{scene.key}}</span>
									</a>
									<div class="icons">
										<img data-ui-if="scene.mixin" src="images/mixin.svg" title="Mixin">
										<img data-ui-if="scene.isForeground" src="images/foreground.svg" title="Foreground">
									</div>
								</li>
							</ul>
							<div class="add-item">
								<button
									type="button"
									data-ng-click="adventure.addScene()">Add Scene</button>
							</div>
						</div>
						<div class="detail-view">
							<div class="selected-item">
								<ul class="action-list">
									<li class="action copy">
										<button
											type="button"
											data-ng-click="copyScene(selectedScene)">Copy</button>
									</li>
									<li class="action remove">
										<button
											type="button"
											data-ng-click="removeScene(selectedScene)">Remove</button>
									</li>
								</ul>
								<scene-preview data-ng-scene="selectedScene"></scene-preview>
								<div class="options general">
									<table>
										<tr>
											<th><label for="name">Name</label></th>
											<td>
												<input
													id="name"
													type="text"
													placeholder="Untitled"
													data-ng-model="selectedScene.name">
											</td>
										</tr>
										<tr>
											<th><label for="key">Hotkey</label></th>
											<td>
												<key-input
													id="key"
													data-ng-model="selectedScene.key"></key-input>
											</td>
										</tr>
										<tr>
											<th><label for="layer">Layer</label></th>
											<td>
												<ul class="control-list">
													<li>
														<select
															id="layer"
															data-ng-model="selectedScene.layer">
															<option value="background">Background</option>
															<option value="foreground">Foreground</option>
														</select>
													</li>
													<li>
														<label for="mixin">
															<input
																id="mixin"
																type="checkbox"
																data-ng-model="selectedScene.mixin">
															Mixin
														</label>
													</li>
												</ul>
											</td>
										</tr>
									</table>
								</div>
								<div class="options specific">
									<ul class="tab-list">
										<li class="tab"><a href="#image-tab">Image</a></li>
										<li class="tab"><a href="#sound-tab">Sound</a></li>
										<li class="tab"><a href="#text-tab">Text</a></li>
										<li class="tab"><a href="#other-tab">Other</a></li>
									</ul>
									<div id="image-tab" class="tab-content">
										<table>
											<tr>
												<td>
													<button
														type="button"
														class="file secondary"
														data-ng-hide="selectedScene.image.url">Select Image</button>
													<button
														type="button"
														class="secondary"
														data-ng-show="selectedScene.image.url">Remove</button>
													<span
														class="primary"
														data-ui-if="selectedScene.image.url">{{selectedScene.image.name}}</span>
													<span
														class="primary note"
														data-ui-if="!selectedScene.image.url">No image selected</span>
												</td>
											</tr>
											<tr>
												<td>
													<ul class="control-list">
														<li>
															<label for="size-contain">
																<input
																	id="size-contain"
																	type="radio"
																	name="image-size"
																	value="contain"
																	data-ng-model="selectedScene.image.size">
																<span>Fit</span>
															</label>
														</li>
														<li>
															<label for="size-cover">
																<input
																	id="size-cover"
																	type="radio"
																	name="image-size"
																	value="cover"
																	data-ng-model="selectedScene.image.size">
																<span>Fill</span>
															</label>
														</li>
													</ul>
												</td>
											</tr>
										</table>
									</div>
									<div
										id="sound-tab"
										class="tab-content">
										<table>
											<tr>
												<th><label>Playback</label></th>
												<td>
													<ul class="control-list">
														<li>
															<label for="loop">
																<input
																	id="loop"
																	type="checkbox"
																	data-ng-model="selectedScene.sound.loop">
																<span>Loop</span>
															</label>
														</li>
														<li>
															<label for="shuffle">
																<input
																	id="shuffle"
																	type="checkbox"
																	data-ng-model="selectedScene.sound.shuffle">
																<span>Shuffle</span>
															</label>
														</li>
													</ul>
												</td>
											</tr>
											<tr>
												<th>
													<label for="volume">Volume</label>
												</th>
												<td>
													<input
														id="volume"
														type="number"
														min="0"
														max="100"
														step="10"
														data-ng-model="selectedScene.sound.volume">
													<span class="note">%</span>
												</td>
											</tr>
											<tr>
												<th><label for="overlap">Overlap</label></th>
												<td>
													<input
														id="overlap"
														type="number"
														min="0"
														value="0"
														data-ng-model="selectedScene.sound.overlap">
													<span class="note">seconds</span>
												</td>
											</tr>
											<tr>
												<th><label>Tracks</label></th>
												<td>
													<p
														class="note"
														data-ui-if="selectedScene.sound.tracks.length == 0">
														No tracks selected
													</p>
													<ol class="track-list">
														<li data-ng-repeat="track in selectedScene.sound.tracks">
															<button
																type="button"
																class="secondary">Remove</button>
															<span
																class="primary"
																data-ng-class="{ unsupported: !isPlayable }">
																{{track.name}}
															</span>
															<audio
																data-ng-src="{{track.url}}"
																preload="auto"></audio>
														</li>
													</ol>
													<button
														type="button"
														class="file">Add Tracks</button>
												</td>
											</tr>
										</table>
									</div>
									<div
										id="text-tab"
										class="tab-content">
										<table>
											<tr>
												<th><label for="text">Text</label></th>
												<td>
													<textarea
														id="text"
														rows="5"
														data-ng-model="selectedScene.text.string"></textarea>
												</td>
											</tr>
											<tr>
												<th>
													<label for="font">Font</label>
												</th>
												<td>
													<input
														id="font"
														type="text"
														data-ng-model="selectedScene.text.font">
												</td>
											</tr>
											<tr>
												<th></th>
												<td>
													<ul class="control-list">
														<li>
															<label for="bold">
																<input
																	id="bold"
																	type="checkbox"
																	data-ng-model="selectedScene.text.bold">
																<span><b>Bold</b></span>
															</label>
														</li>
														<li>
															<label for="italic">
																<input
																	id="italic"
																	type="checkbox"
																	data-ng-model="selectedScene.text.italic">
																<span><i>Italic</i></span>
															</label>
														</li>
													</ul>
												</td>
											<tr>
												<th><label for="font-size">Size</label></th>
												<td>
													<input
														id="font-size"
														type="number"
														min="3"
														max="30"
														step="0.5"
														data-ng-model="selectedScene.text.size">
													<span class="note">% of screen width</span>
												</td>
											</tr>
											<tr>
												<th><label for="font-color">Color</label></th>
												<td>
													<input
													id="font-color"
													type="color"
													data-ng-model="selectedScene.text.color">
												</td>
											</tr>
											<tr>
												<th><label for="text-alignment">Align</label></th>
												<td>
													<select
														id="text-alignment"
														data-ng-model="selectedScene.text.alignment">
														<option value="left">Left</option>
														<option value="center">Center</option>
														<option value="right">Right</option>
													</select>
												</td>
											</tr>
											<tr>
												<th><label for="text-padding">Padding</label></th>
												<td>
													<input
														id="text-padding"
														type="number"
														min="0"
														max="40"
														step="2"
														data-ng-model="selectedScene.text.padding">
													<span class="note">% of screen width</span>
												</td>
											</tr>
										</table>
									</div>
									<div
										id="other-tab"
										class="tab-content">
										<table>
											<tr>
												<th><label for="background-color">Background</label></th>
												<td>
													<input
													id="background-color"
													type="color"
													data-ng-model="selectedScene.background.color">
												</td>
											</tr>
											<tr>
												<th><label for="fade">Fade</label></th>
												<td>
													<ul class="control-list">
														<li>
															<input
																id="fade"
																type="number"
																min="0"
																data-ng-model="selectedScene.fade.duration">
															<span class="note">seconds</span>
														</li>
														<li>
															<select data-ng-model="selectedScene.fade.direction">
																<option value="in out">In and out</option>
																<option value="in">In</option>
																<option value="out">Out</option>
															</select>
														</li>
													</ul>
												</td>
											</tr>
										</table>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<no-pointer
				class="theater-overlay"
				data-always-show-when="editorIsVisible"
				data-hide-delay="1000">
				<form>
					<ul class="action-list">
						<li class="action toggle">
							<toggle-button
								data-ng-model="$parent.editorIsVisible"
								data-ng-true="Hide Editor"
								data-ng-false="Show Editor"></toggle-button>
						</li>
					</ul>
				</form>
			</no-pointer>
		</div>
		<div id="splash" class="splash">
			<div id="splash-loading">
				<p>Loading RPG Ambience…</p>
			</div>
			<div id="splash-unsupported" style="display: none">
				<p>Unfortunately, your browser does not support RPG Ambience.</p>
				<p>RPG Ambience is known to work in the following browsers:</p>
				<ul>
					<li>Google Chrome 23</li>
					<li>Internet Explorer 10</li>
					<li>Mozilla Firefox 16</li>
				</ul>
			</div>
		</div>
	</body>
</html>
